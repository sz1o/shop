<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Customer — Admin</title>
  <link rel="stylesheet" href="styles.css" />
  <style>
    .center { max-width:720px;margin:36px auto;padding:20px;background:#fff;border-radius:8px;box-shadow:0 6px 18px rgba(0,0,0,.08); }
    .hidden { display:none; }
    .label { font-weight:700;margin-top:8px;display:block; }
    .value { margin-bottom:10px; }
    .pw-input { padding:8px 10px; width:100%; max-width:320px; margin-right:8px; }
    .pw-row { display:flex; gap:8px; align-items:center; margin-bottom:12px; }
  </style>
</head>
<body>
  <div class="center">
    <h2>Customer — Admin View</h2>

    <div id="login-area">
      <p>This page is password protected.</p>
      <div class="pw-row">
        <input id="admin-password" type="password" class="pw-input" placeholder="Enter password" />
        <button id="unlock-btn">Unlock</button>
      </div>
      <p style="font-size:0.9em;color:#666">Password required to view customer details.</p>
    </div>

    <div id="customer-area" class="hidden">
      <h3>Customer Details</h3>
      <div><span class="label">Email:</span><div id="c-email" class="value"></div></div>
      <div><span class="label">Product:</span><div id="c-product" class="value"></div></div>
      <div><span class="label">Payment Method:</span><div id="c-method" class="value"></div></div>
      <div id="year-row"><span class="label">Year:</span><div id="c-year" class="value"></div></div>
      <div><span class="label">Accessed:</span><div id="c-accessed" class="value"></div></div>
      <p style="margin-top:14px;"><a href="shop.html">Back to Shop</a></p>
    </div>

    <div id="wrong-pw" class="hidden" style="color:#a00;margin-top:8px;">Incorrect password.</div>
  </div>

  <script>
    (function () {
      var PASSWORD = 'SageStock123';

      function qs() {
        return new URLSearchParams(window.location.search);
      }

      function showCustomer() {
        var params = qs();
        var email = params.get('email') || 'N/A';
        var product = params.get('product') || 'N/A';
        var method = params.get('method') || 'N/A';
        var year = params.get('year');

        document.getElementById('c-email').textContent = decodeURIComponent(email);
        document.getElementById('c-product').textContent = decodeURIComponent(product);
        document.getElementById('c-method').textContent = decodeURIComponent(method);
        if (year) {
          document.getElementById('c-year').textContent = decodeURIComponent(year);
          document.getElementById('year-row').style.display = 'block';
        } else {
          document.getElementById('year-row').style.display = 'none';
        }
        document.getElementById('c-accessed').textContent = new Date().toLocaleString();
      }

      function unlock() {
        var val = document.getElementById('admin-password').value;
        if (val === PASSWORD) {
          document.getElementById('login-area').classList.add('hidden');
          document.getElementById('wrong-pw').classList.add('hidden');
          document.getElementById('customer-area').classList.remove('hidden');
          showCustomer();
        } else {
          document.getElementById('wrong-pw').classList.remove('hidden');
        }
      }

      document.getElementById('unlock-btn').addEventListener('click', unlock);
      document.getElementById('admin-password').addEventListener('keydown', function (e) {
        if (e.key === 'Enter') unlock();
      });
    })();
  </script>
</body>
</html>